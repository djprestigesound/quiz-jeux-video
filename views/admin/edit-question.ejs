<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modifier la question - Admin Quiz</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="admin-layout">
    <%- include('partials/nav') %>

    <div class="admin-content">
      <div class="page-header">
        <h1>✏️ Modifier la question #<%= question.id %></h1>
      </div>

      <% if (error) { %>
        <div class="alert alert-error"><%= error %></div>
      <% } %>

      <form action="/admin/questions/edit/<%= question.id %>" method="POST" class="question-form">
        <div class="form-group">
          <label for="question">Question *</label>
          <textarea
            id="question"
            name="question"
            rows="3"
            required
          ><%= question.question %></textarea>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="option_a">Réponse A *</label>
            <input type="text" id="option_a" name="option_a" value="<%= question.option_a %>" required>
          </div>

          <div class="form-group">
            <label for="option_b">Réponse B *</label>
            <input type="text" id="option_b" name="option_b" value="<%= question.option_b %>" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="option_c">Réponse C *</label>
            <input type="text" id="option_c" name="option_c" value="<%= question.option_c %>" required>
          </div>

          <div class="form-group">
            <label for="option_d">Réponse D *</label>
            <input type="text" id="option_d" name="option_d" value="<%= question.option_d %>" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="correct_answer">Bonne réponse *</label>
            <select id="correct_answer" name="correct_answer" required>
              <option value="A" <%= question.correct_answer === 'A' ? 'selected' : '' %>>A</option>
              <option value="B" <%= question.correct_answer === 'B' ? 'selected' : '' %>>B</option>
              <option value="C" <%= question.correct_answer === 'C' ? 'selected' : '' %>>C</option>
              <option value="D" <%= question.correct_answer === 'D' ? 'selected' : '' %>>D</option>
            </select>
          </div>

          <div class="form-group">
            <label for="category">Catégorie *</label>
            <input
              type="text"
              id="category"
              name="category"
              value="<%= question.category %>"
              list="categories"
              required
            >
            <datalist id="categories">
              <% categories.forEach(cat => { %>
                <option value="<%= cat.category %>">
              <% }); %>
            </datalist>
          </div>

          <div class="form-group">
            <label for="difficulty">Difficulté</label>
            <select id="difficulty" name="difficulty">
              <option value="easy" <%= question.difficulty === 'easy' ? 'selected' : '' %>>Facile</option>
              <option value="medium" <%= question.difficulty === 'medium' ? 'selected' : '' %>>Moyen</option>
              <option value="hard" <%= question.difficulty === 'hard' ? 'selected' : '' %>>Difficile</option>
            </select>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Enregistrer les modifications</button>
          <a href="/admin/questions" class="btn btn-secondary">Annuler</a>
        </div>
      </form>
    </div>
  </div>
</body>
</html>
