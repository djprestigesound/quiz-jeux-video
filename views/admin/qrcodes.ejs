<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Codes - Admin Quiz</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="admin-layout">
    <%- include('partials/nav') %>

    <div class="admin-content">
      <div class="page-header">
        <h1>ğŸ“± QR Codes</h1>
        <p>Codes QR pour accÃ©der au quiz</p>
      </div>

      <div class="qrcode-section">
        <div class="qrcode-card">
          <h3>QR Code principal</h3>
          <p>Scannez ce code pour accÃ©der au quiz</p>

          <div class="qrcode-display">
            <img src="<%= qrCodeUrl %>" alt="QR Code Quiz" class="qrcode-image">
          </div>

          <div class="qrcode-info">
            <strong>URL d'accÃ¨s :</strong>
            <div class="url-display">
              <code><%= baseUrl %></code>
              <button class="btn-copy" onclick="copyUrl()">ğŸ“‹ Copier</button>
            </div>
          </div>

          <div class="qrcode-actions">
            <button class="btn btn-primary" onclick="printQRCode()">ğŸ–¨ï¸ Imprimer</button>
            <a href="<%= qrCodeUrl %>" download="quiz-qrcode.png" class="btn btn-secondary">ğŸ’¾ TÃ©lÃ©charger</a>
          </div>
        </div>

        <div class="qrcode-instructions">
          <h3>ğŸ“– Instructions</h3>
          <ol>
            <li>Imprimez ou affichez le QR code Ã  l'Ã©cran</li>
            <li>Les participants scannent le code avec leur smartphone</li>
            <li>Ils sont redirigÃ©s vers la page d'accueil du quiz</li>
            <li>Ils entrent leur pseudo et commencent Ã  jouer</li>
          </ol>

          <div class="tip">
            ğŸ’¡ <strong>Astuce :</strong> Vous pouvez aussi partager l'URL directement si les participants sont dÃ©jÃ  connectÃ©s au mÃªme rÃ©seau local.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function copyUrl() {
      const url = '<%= baseUrl %>';
      navigator.clipboard.writeText(url).then(() => {
        alert('URL copiÃ©e dans le presse-papiers !');
      });
    }

    function printQRCode() {
      window.print();
    }
  </script>

  <style>
    @media print {
      .admin-nav, .page-header p, .qrcode-actions, .qrcode-instructions {
        display: none !important;
      }

      .qrcode-card {
        text-align: center;
        page-break-inside: avoid;
      }

      .qrcode-image {
        max-width: 400px;
      }
    }
  </style>
</body>
</html>
